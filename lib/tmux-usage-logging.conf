# ============================================================================
# TMUX USAGE LOGGING - Captures activity for analysis
# Source this from .tmux.conf
# ============================================================================

# Pane events
set-hook -g after-select-pane 'run-shell -b "usage-log tmux pane_select pane_id=#{pane_id} pane_index=#{pane_index} window=#{window_name} session=#{session_name} cmd=#{pane_current_command} path=#{pane_current_path}"'
set-hook -g after-split-window 'run-shell -b "usage-log tmux pane_split pane_id=#{pane_id} window=#{window_name} session=#{session_name} path=#{pane_current_path}"'
set-hook -g pane-exited 'run-shell -b "usage-log tmux pane_exit pane_id=#{pane_id} window=#{window_name}"'

# Window events
set-hook -g after-select-window 'run-shell -b "usage-log tmux window_select window=#{window_name} window_index=#{window_index} session=#{session_name} panes=#{window_panes}"'
set-hook -g after-new-window 'run-shell -b "usage-log tmux window_new window=#{window_name} session=#{session_name} path=#{pane_current_path}"'
set-hook -g window-renamed 'run-shell -b "usage-log tmux window_rename window=#{window_name} session=#{session_name}"'

# Session events
set-hook -g session-created 'run-shell -b "usage-log tmux session_create session=#{session_name}"'
set-hook -g client-attached 'run-shell -b "usage-log tmux client_attach session=#{session_name} client=#{client_name}"'
set-hook -g client-detached 'run-shell -b "usage-log tmux client_detach session=#{session_name}"'

# Layout changes - DISABLED (too noisy, fires on every resize pixel)
# set-hook -g after-resize-pane 'run-shell -b "usage-log tmux pane_resize pane_id=#{pane_id} width=#{pane_width} height=#{pane_height}"'
# set-hook -g window-layout-changed 'run-shell -b "usage-log tmux layout_change window=#{window_name} layout=#{window_layout}"'

# Copy mode
set-hook -g pane-mode-changed 'run-shell -b "usage-log tmux mode_change pane_id=#{pane_id} mode=#{pane_mode}"'
